<center><canvas id="blackcanvas" width="480" height="640">Sorry, your browser does not support JavaScript canvas, or it is disabled.</canvas><script type="application/javascript">function print(msg){setTimeout(function(){throw new Error(msg);},0);};function perceptronblack(){var MFP=16;var W=480;var H=640;var W2=W/2;var H2=H/2;var cvs=document.getElementById('blackcanvas');cvs.width=W;cvs.height=H;var ctx=cvs.getContext('2d');var imageData=ctx.getImageData(0,0,W,H);cvs.onselectstart=function(){return false;};cvs.className="item";var cursor1=document.createElement("div");document.body.appendChild(cursor1);cursor1.style='border-radius:50%';cursor1.style['border-radius']='50%';cursor1.style.background='#0F0';cursor1.style.position='absolute';cursor1.style.width=26;cursor1.style.height=26;cursor1.style.top=cvs.offsetTop+H2;cursor1.style.left=cvs.offsetLeft+W2;cursor1.onselectstart=function(){return false;};cursor1.className="item";var cursor2=document.createElement("div");document.body.appendChild(cursor2);cursor2.style='border-radius:50%';cursor2.style['border-radius']='50%';cursor2.style.background='#F00';cursor2.style.position='absolute';cursor2.style.width=26;cursor2.style.height=26;cursor2.style.top=cvs.offsetTop+H2/2;cursor2.style.left=cvs.offsetLeft+W2;cursor2.onselectstart=function(){return false;};cursor2.className="item";var cursor_selected=null;document.onmouseup=function(e){cursor_selected=null;};cursor1.onmousedown=function(e) {cursor_selected=cursor1;print('cursor 1');};cursor2.onmousedown=function(e){cursor_selected=cursor2;print('cursor 2');};document.onmousemove=function(e) {if (cursor_selected!=null) {var x=e.pageX-cvs.offsetLeft;var y=e.pageY-cvs.offsetTop;x=Math.min(W-13,x);y=Math.min(H-13,y);x=Math.max(13,x);y=Math.max(13,y);cursor_selected.style.top=y+cvs.offsetTop-13;cursor_selected.style.left=x+cvs.offsetLeft-13;}};var map=new Int32Array(W*H*2);for (var y=0; y<H;++y) {for (var x=0; x<W;++x) {var real2=(x-W2)*4.0/W;var imag2=(y-H2)*4.0/H;var x2=Math.round((real2*W/4+W2)*MFP);var y2=Math.round((imag2*H/4+H2)*MFP);var index=y*W+x;map[index*2]=x2-W2*MFP;map[index*2+1]=y2-H2*MFP;}}var buff1=new Uint32Array( W*H+1);var buff2=new Uint32Array( W*H+1);offsetx=0;offsety=0;costheta=0;sintheta=0;var data=new Uint32Array(imageData.data.buffer);var huetic=0;var ring=true;var downX=null; var downY=null;function render() {y1=cursor1.offsetTop-cvs.offsetTop-H2+13;x1=cursor1.offsetLeft-cvs.offsetLeft-W2+13;offsetx=-x1*16;offsety=-y1*16;y2=cursor2.offsetTop-cvs.offsetTop-H2+13;x2=cursor2.offsetLeft-cvs.offsetLeft-W2+13;mouseTheta=Math.atan2(x2,y2);mouseRadius=Math.round(256*256/Math.sqrt(x2*x2+y2*y2));costheta=Math.cos(mouseTheta)*mouseRadius;sintheta=Math.sin(mouseTheta)*mouseRadius;var rand=Math.floor(Math.random()*0x1000000);for (var y=4; y<H-4;++y)for (var x=4;x<W-4;++x) {var index=y*W+x;var x2=map[index*2]+offsetx;var y2=map[index*2+1]+offsety;var x3=(costheta*x2+sintheta*y2>>8)+W2*MFP;var y3=(costheta*y2-sintheta*x2>>8)+H2*MFP;var xi=x3>>4;var yi=y3>>4;var xf=x3&0xf;var yf=y3&0xf;var xj=xi;var yj=yi;var s=0;while (xj< 0) {xj+=W;s=1-s;}while (xj>=W) {xj-=W;s=1-s;}while (yj< 0) {yj+=H;s=1-s;}while (yj>=H) {yj-=H;s=1-s;}var colorA=buff1[(xj+yj*W)];var xj2=xj+1;if (xj2>=W) xj2-=W;var colorB=buff1[(xj2+yj*W)];yj+=1;if (yj>=H) yj-=H;var colorC=buff1[(xj+yj*W)];var colorD=buff1[(xj2+yj*W)];var colorE=(15-xf)*colorA+xf*colorB;var colorF=(15-xf)*colorC+xf*colorD;var color=(15-yf)*colorE+yf*colorF>>8;if(s){color=(1+color)*257>>7;}if(color>0xff){color=0xff;}if(color<0){color=0;}buff2[index]=color;data[index]=0xff000000 | (color&0xff)*0x010101;}ctx.putImageData(imageData,0,0);var temp=buff2;buff2=buff1;buff1=temp;if (ring)setTimeout(render,50);}cvs.onmousedown=function(e){downX=e.pageX;downY=e.pageY;};cvs.onclick=function(e){if (downX==e.pageX && downY==e.pageY){if(ring){ring=false;}else {ring=true;setTimeout(render,0);}}};setTimeout(render, 0);}perceptronblack();</script><br/></center>
